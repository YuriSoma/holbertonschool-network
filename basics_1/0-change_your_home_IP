#!/usr/bin/env bash
# Script to update /etc/hosts so that:
# - localhost resolves to 127.0.0.2
# - facebook.com resolves to 8.8.8.8

# Backup the original hosts file (only once)
if [ ! -f /etc/hosts.bak ]; then
    cp /etc/hosts /etc/hosts.bak
fi

# Create a temporary file
tmpfile=$(mktemp)

# Copy everything except old localhost and facebook.com entries
grep -vE '\slocalhost$|\sfacebook\.com$' /etc/hosts > "$tmpfile"

# Add the new entries
echo "127.0.0.2 localhost" >> "$tmpfile"
echo "8.8.8.8 facebook.com" >> "$tmpfile"

# Replace the hosts file
cat "$tmpfile" > /etc/hosts
rm -f "$tmpfile"
